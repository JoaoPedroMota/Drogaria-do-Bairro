name: Primeira Ação GithubActions

on:
  push:
    branches:
      -main

  # shedule:
  #   - cron: "0 3 * * 1" # todas as segundas feiras às 3 da manhã

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3
    - name: Set up python 3.11
        uses: actions/setup-python@v3
        with:
          python-version: 3.11
    - name: Instalar dependências
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt
    - name: Coverage relatório
        run: |
          pip install coverage
          coverage run .\manage.py --omit='*/ambiente_projeto/*' test loja
          coverage  report
    - name: Correr servidor.
        run: |
          python .\manage.py runserver
